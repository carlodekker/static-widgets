<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Sezzle SDK Test</title>
  </head>
  <body class='container'>
    <script>
        function testing (e){
            e.preventDefault();
            e.stopPropagation();
            console.log(e);
        }
    </script>
        <p id="price" class="product-form__price-price">$1,234.56</p>
				<div id="sezzle-widget"></div>
    </form>

    <script src='../dist/bundle.js'></script>

    <script>
      const renderSezzle = new AwesomeSezzle({
      // string, variable or document...innerText
      amount: document.querySelector('.product-form__price-price').innerText,
      // null or string with the below templates, or object with 'en' and 'fr' keys
      // %%price%% %%logo%% %%info%% %%question-mark%% %%link%% %%afterpay-logo%% %%afterpay-logo-grey%% %%afterpay-logo-white%% %%afterpay-info-icon%% %%afterpay-link-icon%% %%quadpay-logo%% %%quadpay-logo-grey%% %%quadpay-logo-white%% %%quadpay-info-icon%%
      widgetTemplate: 'or 4 interest-free payments of %%price%% with %%logo%% %%info%% or %%afterpay-logo%% %%afterpay-info-icon%%',
	    // null or outerHTML
			// altModalHTML: '',
			// null or outerHTML
    	apModalHTML: '<div id="afterpay-popup-wrapper" style="position: fixed; z-index: 2147483647; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: auto;"><div id="afterpay-popup-outer" style="display: flex; place-content: center; align-items: center; width: 100%; min-height: 100%; background-color: rgba(0, 0, 0, 0.8);"><div id="afterpay-popup-inner" style="position: relative; background-color: rgb(255, 255, 255);"><a href="https://www.afterpay.com/purchase-payment-agreement" target="_blank" style="display: block;"><img src="https://static.afterpay.com/us-popup-medium.png" srcset="https://static.afterpay.com/us-popup-medium.png 1x, https://static.afterpay.com/us-popup-medium@2x.png 2x" style="max-width: 597px; display: block; width: 100%;"></a><a href="#" style="position: absolute; right: 8px; top: 8px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" version="1.1" width="32px" height="32px"><g id="surface1"><path style=" " d="M 16 3 C 8.832031 3 3 8.832031 3 16 C 3 23.167969 8.832031 29 16 29 C 23.167969 29 29 23.167969 29 16 C 29 8.832031 23.167969 3 16 3 Z M 16 5 C 22.085938 5 27 9.914063 27 16 C 27 22.085938 22.085938 27 16 27 C 9.914063 27 5 22.085938 5 16 C 5 9.914063 9.914063 5 16 5 Z M 12.21875 10.78125 L 10.78125 12.21875 L 14.5625 16 L 10.78125 19.78125 L 12.21875 21.21875 L 16 17.4375 L 19.78125 21.21875 L 21.21875 19.78125 L 17.4375 16 L 21.21875 12.21875 L 19.78125 10.78125 L 16 14.5625 Z "></path></g></svg></a></div></div></div>',
		});
    renderSezzle.init();

		document.onchange = function(){
        var newPrice = document.querySelector('.product-form__price-price').innerText;
        renderSezzle.alterPrice(newPrice);
				hideOrShowSezzle;
      }

		function hideOrShowSezzle(){
			console.log('hiding')
			// var oneTimeOption = document.querySelector('.rc_block__type__onetime');
			// if(oneTimeOption && oneTimeOption.className.indexOf('rc_block__type--active') === -1){
			// 	document.querySelector('#sezzle-widget').style.display = "none";
			// } else {
			// 	document.querySelector('#sezzle-widget').style.display = "block";
			// }
		}

		document.onload = hideOrShowSezzle();
		// document.querySelector('.rc_block__container').addEventListener('click', hideOrShowSezzle);

	setTimeout(()=>{
	  const  amount  = '$ 100';
	  document.getElementById('price').innerText = amount
	  renderSezzle.alterPrice(amount)
	},3000);
    </script>

  </body>
</html>
